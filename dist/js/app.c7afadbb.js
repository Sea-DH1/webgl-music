(function(t){function e(e){for(var i,r,s=e[0],h=e[1],c=e[2],d=0,u=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&u.push(a[r][0]),a[r]=0;for(i in h)Object.prototype.hasOwnProperty.call(h,i)&&(t[i]=h[i]);l&&l(e);while(u.length)u.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,s=1;s<n.length;s++){var h=n[s];0!==a[h]&&(i=!1)}i&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},a={app:0},o=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],h=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var l=h;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"1dc2":function(t,e,n){t.exports=n.p+"img/left.a19fd684.jpg"},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("a026"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"file-select-btn",on:{click:function(e){return t.$refs.fileId.click()}}},[t._v(" 选择音乐 "),n("input",{ref:"fileId",staticClass:"file-input",attrs:{type:"file"},on:{change:t.getAudio}})]),n("div",{staticClass:"music-play-btn",on:{click:t.musicPlay}},[t._v("播放默认音乐")])])},o=[],r=(n("99af"),n("4de4"),n("4160"),n("d81d"),n("d3b7"),n("cfc3"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("159b"),n("5a89")),s=n("4721"),h=n("b9d8"),c=n("32d9"),l=n("93e9"),d=n("9ab2"),u=n("360d"),f=n("e9d2"),p=n("ef20");function g(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=-1,o=Math.max(Math.ceil((e-t)/n),0),r=Array(o);while(o--)r[i?o:++a]=t,t+=n;return r}var w=n("d4ec"),m=n("bee2"),v=function(){function t(e,n,i){Object(w["a"])(this,t),this.baseRange=e,this.angle=n,this.center=i,this.lastStrength=0,this.theStrength=0,this.targetRange=0,this._range=0}return Object(m["a"])(t,[{key:"positionA",value:function(){var t=this._range+this.baseRange,e=Math.cos(this.angle*Math.PI/180)*t,n=Math.sin(this.angle*Math.PI/180)*t;return new r["I"](this.center.x+e,this.center.y+n)}},{key:"positionB",value:function(){var t=-1*this._range+this.baseRange,e=Math.cos(this.angle*Math.PI/180)*t,n=Math.sin(this.angle*Math.PI/180)*t;return new r["I"](this.center.x+e,this.center.y+n)}},{key:"strength",value:function(t){this.lastStrength=this.theStrength,this.theStrength=t,this.targetRange=Math.max(this.theStrength-this.lastStrength,0),this.targetRange>this._range&&(this._range=this.targetRange)}},{key:"transition",value:function(t){this._range=Math.max(this._range-t*this._range*5,0)}}]),t}();function y(t,e){return t+(Math.random()-.5)*e}var b,M,x,S,P,C,j,k,A,O,R,B,I,T,_=function(){function t(e,n,i,a,o,s,h,c,l){var d,u;Object(w["a"])(this,t),this.rotate=360*Math.random(),this.id=Math.random(),this.mesh=null,this.panelOpacity=.1,this.line=null,this.group=null,this.rotateSpeed=o,this.angle=i,this.speed=a,this.center=n,this.onDelete=l,this.distance=c.startShow,this.showDistance=c,this.panelMaterial=(new r["v"]).copy(s),this.panelMaterial.transparent=!0,this.lineMaterial=(new r["r"]).copy(h),this.lineMaterial.transparent=!0;var f=new r["o"],p=new r["o"],g=[new r["J"](y(e,e/2),y(e,e/2),y(e,e/2)),new r["J"](-1*y(e,e/2),y(e,e/2),y(e,e/2)-1),new r["J"](-1*y(e,e/2),-1*y(e,e/2),y(e,e/2)-1)];(d=f.vertices).push.apply(d,g),(u=p.vertices).push.apply(u,[].concat(g,[g[0]])),f.faces.push(new r["n"](0,1,2)),f.computeFaceNormals(),f.computeVertexNormals(),this.line=new r["q"](p,this.lineMaterial),this.mesh=new r["u"](f,this.panelMaterial),this.group=new r["p"],this.translateOnAxis(this.translate(this.distance),1),this.group.add(this.line),this.group.add(this.mesh),this.rotateZ(this.rotate),this.updatePosition(0)}return Object(m["a"])(t,[{key:"rotateZ",value:function(t){this.mesh.geometry.rotateZ(t),this.line.geometry.rotateZ(t)}},{key:"translate",value:function(t){var e=Math.cos(this.angle*Math.PI/180)*t,n=Math.sin(this.angle*Math.PI/180)*t,i=Math.cos(this.angle*Math.PI/360)*t*this.angle/180;return new r["J"](e,n,i)}},{key:"translateOnAxis",value:function(t,e){this.group.translateOnAxis(t,e)}},{key:"updatePosition",value:function(t){this.translateOnAxis(this.translate(t*this.speed),1),this.distance+=t*this.speed,this.rotateZ(this.rotateSpeed*t),this.panelMaterial.opacity=this.opacity(this.distance,this.showDistance)*this.panelOpacity,this.lineMaterial.opacity=this.opacity(this.distance,this.showDistance),this.distance>this.showDistance.endHide&&this.delete()}},{key:"delete",value:function(){this.onDelete(this),this.mesh.geometry.dispose(),this.line.geometry.dispose()}},{key:"opacity",value:function(t,e){return this.distance<e.endShow?(this.distance-e.startShow)/(e.endShow-e.startShow):this.distance>e.startHide?(e.endHide-this.distance)/(e.endHide-e.startHide):1}},{key:"transition",value:function(t){this.updatePosition(t)}}]),t}(),L={R:20,G:90,B:225,TrianglesBgColor:240116,TrianglesLineColor:240116,lineColor:65535,rotate:!1},D=[],H=[],E={name:"App",data:function(){return{positionZ:80,N:256,clock:new r["j"],scale:1,musics:["../static/audio.mp3","../static/Mojito.mp3"]}},mounted:function(){this.init()},methods:{init:function(){b=new r["L"]({antialias:!0,alpha:!0}),b.setClearAlpha(0),b.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(b.domElement),M=new r["D"],M.background=(new r["l"]).load([n("9ac2"),n("1dc2"),n("6f4f"),n("f254"),n("a7f3"),n("dbe6")]),x=new r["y"](75,window.innerWidth/window.innerHeight,1,1e4),x.position.z=this.positionZ,window.addEventListener("resize",this.onWindowResize,!1),this.audioLines(20,this.N),this.audioBars(25,this.N/2),T=new r["p"],setInterval(this.addTriangle.bind(this),500),M.add(T);var t=new r["e"];j=new r["c"](t),this.initLight(),this.initControls(),this.initGui(),this.initBloomPass(),this.initStats(),this.animate()},renderGeometries:function(t){var e=[];return t=t.concat(t[0]),t.forEach((function(t){e.push(t.x,t.y,0)})),new r["h"](new Float32Array(e),3)},updateCircle:function(){if(B){A.scale.set(this.scale,this.scale,this.scale);var t=O.geometry,e=t.getAttribute("position"),n=R.geometry,i=n.getAttribute("position"),a=B.map((function(t){return[t.positionA(),t.positionB()]}));a.forEach((function(t,n){e.set([t[0].x,t[0].y],3*n),i.set([t[1].x,t[1].y],3*n);var a=D[n].geometry,o=a.getAttribute("position");o.set([t[0].x,t[0].y,0,t[1].x,t[1].y,0],0),o.needsUpdate=!0})),e.set([e.array[0],e.array[1]],3*a.length),i.set([i.array[0],i.array[1]],3*a.length),e.needsUpdate=!0,i.needsUpdate=!0}},audioLines:function(t,e){var n=this;B=g(0,e).map((function(n){return new v(t,(n/e*360+45)%360,new r["I"](0,0))}));var i=new r["r"]({color:L.lineColor});D=g(0,e).map((function(t){return new r["q"]((new r["i"]).setAttribute("position",n.renderGeometries([B[t].positionA(),B[t].positionB()])),i)})),O=new r["q"]((new r["i"]).setAttribute("position",this.renderGeometries(B.map((function(t){return t.positionA()})))),i),R=new r["q"]((new r["i"]).setAttribute("position",this.renderGeometries(B.map((function(t){return t.positionB()})))),i),A=new r["p"],A.add(O),A.add(R),D.forEach((function(t){return A.add(t)})),M.add(A)},addTriangle:function(){var t=new r["v"]({color:L.TrianglesBgColor}),e=new r["r"]({color:L.TrianglesLineColor}),n=this.makeTriangle(t,e,(function(t){H=H.filter((function(e){return e!==t})),T.remove(t.group)}));T.add(n.group),H.push(n)},makeTriangle:function(t,e,n){var i=new _(2,new r["J"](0,0,0),360*Math.random(),y(5,1),y(.1,.05),t,e,{startShow:15,endShow:30,startHide:60,endHide:70},n);return i},audioBars:function(t,e){I=new r["p"];for(var n=t,i=e,a=0;a<i;a++){var o=new r["p"],s=new r["g"](1,1,1),h=new r["w"]({color:65535}),c=a,l=new r["u"](s,h);l.position.y=.5,o.add(l),o.position.set(Math.sin(c*Math.PI/i*2)*n,Math.cos(c*Math.PI/i*2)*n,0),o.rotation.z=-c*Math.PI/i*2,I.add(o)}M.add(I)},initBloomPass:function(){var t={exposure:.5,bloomStrength:1,bloomThreshold:0,bloomRadius:.8},e=new l["a"](M,x),n=new d["a"](new r["I"](window.innerWidth,window.innerHeight),1.5,.2,0);n.threshold=t.bloomThreshold,n.strength=t.bloomStrength,n.radius=t.bloomRadius,C=new c["a"](b);var i=new u["a"](f["a"]);i.renderToScreen=!0,C.addPass(e),C.addPass(n),C.addPass(i)},animate:function(){if(P.update(),S.update(),k){var t=k.getFrequencyData();I&&(I.rotation.z+=.002,I.scale.set(this.scale,this.scale,this.scale),I.children.forEach((function(e,n){if(L.R&&(e.children[0].material.color.r=t[n]/(3*L.R)),L.G&&(e.children[0].material.color.g=t[n]/(3*L.G)),L.B&&(e.children[0].material.color.b=t[n]/(3*L.B)),0===t[n])e.scale.set(0,0,0);else{var i=t[n]/20,a=Math.max(t[n]/20-t[n-1]/20,0);i<a&&(i=a),e.scale.set(1,i,1)}})));var e=this.clock.getDelta();B.forEach((function(n,i,a){n.strength(.1*t[i%a.length]),n.transition(e)})),this.scale=1+t[Math.ceil(.05*t.length)]/500,this.updateCircle(t),H.forEach((function(t){return t.transition(e)}))}C.render(),requestAnimationFrame(this.animate)},onWindowResize:function(){x.aspect=window.innerWidth/window.innerHeight,x.updateProjectionMatrix(),b.setSize(window.innerWidth,window.innerHeight),C.setSize(window.innerWidth,window.innerHeight)},initControls:function(){S=new s["a"](x,b.domElement),S.enableDamping=!0,S.enableZoom=!0,S.autoRotate=L.rotate,S.minDistance=1,S.maxDistance=200,S.enablePan=!1},initStats:function(){P=new p["a"],document.body.appendChild(P.dom)},initGui:function(){var t=new h["a"];t.add(L,"R",0,255),t.add(L,"G",0,255),t.add(L,"B",0,255),t.add(L,"rotate").onChange((function(t){S.autoRotate=t})),t.addColor(L,"TrianglesBgColor").onChange((function(){T.traverse((function(t){t.isMesh&&(t.material=new r["w"]({color:L.TrianglesBgColor}))}))})),t.addColor(L,"TrianglesLineColor").onChange((function(){T.traverse((function(t){t.isLine&&(t.material=new r["r"]({color:L.TrianglesLineColor}))}))})),t.addColor(L,"lineColor").onChange((function(){A.traverse((function(t){t.isLine&&(t.material=new r["r"]({color:L.lineColor}))}))}))},initLight:function(){M.add(new r["b"](4473924));var t=new r["A"](16777215);t.position.set(80,100,50),t.castShadow=!0,M.add(t)},musicPlay:function(){var t=this.musics[1];this.audioLoad(t)},audioLoad:function(t){var e=this,n=new r["f"];n.load(t,(function(t){j.isPlaying&&(j.stop(),j.setBuffer()),j.setBuffer(t),j.setVolume(1),j.play(),k=new r["d"](j,2*e.N)}))},getAudio:function(){var t=this,e=this.$refs.fileId;if(""===e.value)return!1;if(window.FileReader){var n=new FileReader;n.readAsDataURL(e.files[0]),n.onloadend=function(e){t.audioLoad(e.target.result)}}}}},G=E,z=(n("7faf"),n("2877")),W=Object(z["a"])(G,a,o,!1,null,null,null),Z=W.exports,J=n("8c4f");i["a"].use(J["a"]);var q=[],F=new J["a"]({routes:q}),N=F,U=n("2f62");i["a"].use(U["a"]);var $=new U["a"].Store({state:{},mutations:{},actions:{},modules:{}});n("f867");i["a"].config.productionTip=!1,new i["a"]({router:N,store:$,render:function(t){return t(Z)}}).$mount("#app")},"6f4f":function(t,e,n){t.exports=n.p+"img/top.421934e3.jpg"},"7faf":function(t,e,n){"use strict";var i=n("b8ff"),a=n.n(i);a.a},"9ac2":function(t,e,n){t.exports=n.p+"img/right.d0d0d539.jpg"},a7f3:function(t,e,n){t.exports=n.p+"img/front.0ad36e47.jpg"},b8ff:function(t,e,n){},dbe6:function(t,e,n){t.exports=n.p+"img/back.362513b3.jpg"},f254:function(t,e,n){t.exports=n.p+"img/bottom.8c1e5738.jpg"},f867:function(t,e,n){}});